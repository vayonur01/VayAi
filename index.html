<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Sesli ChatGPT</title>
<style>
    body { font-family: Arial; text-align: center; padding: 50px; background: #f0f0f0; }
    #chat { width: 60%; margin: auto; background: white; padding: 20px; border-radius: 10px; max-height: 400px; overflow-y: auto; }
    .user { color: blue; margin: 5px 0; }
    .bot { color: green; margin: 5px 0; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 20px; }
</style>
</head>
<body>

<h1>Sesli ChatGPT</h1>
<div id="chat"></div>
<button id="start">Konuşmaya Başla</button>

<script>
const chat = document.getElementById('chat');
const startBtn = document.getElementById('start');

// Mikrofon ile konuşma
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = 'tr-TR';
recognition.interimResults = false;

// Sesli cevap
function speak(text) {
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = 'tr-TR';
    window.speechSynthesis.speak(utter);
}

// ChatGPT API çağrısı
async function sendMessageToChatGPT(message) {
    const apiKey = "BURAYA_API_KEY"; // Bu alanı kendi API key’inle değiştir
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey}`
        },
        body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [{ role: "user", content: message }]
        })
    });
    const data = await response.json();
    return data.choices[0].message.content;
}

// Konuşma başlat
startBtn.onclick = () => recognition.start();

recognition.onresult = async (event) => {
    const transcript = event.results[0][0].transcript;

    const userMsg = document.createElement('div');
    userMsg.className = 'user';
    userMsg.textContent = 'Sen: ' + transcript;
    chat.appendChild(userMsg);

    const reply = await sendMessageToChatGPT(transcript);

    const botMsg = document.createElement('div');
    botMsg.className = 'bot';
    botMsg.textContent = 'Bot: ' + reply;
    chat.appendChild(botMsg);

    speak(reply);
    chat.scrollTop = chat.scrollHeight;
};
</script>

</body>
</html>
